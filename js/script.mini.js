var openButton=document.querySelector(".write"),openPopup=document.querySelector(".popup-1"),closeButton=openPopup.querySelector(".to-close"),fillingForm=openPopup.querySelector(".form-to-fill"),loginLogin=openPopup.querySelector(".upper-cell"),mailBox=openPopup.querySelector(".upper"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("login")}catch(o){isStorageSupport=!1}openButton.addEventListener("click",function(o){o.preventDefault(),openPopup.classList.add("modal-show"),storage?(loginLogin.value=storage,mailBox.focus()):loginLogin.focus()}),closeButton.addEventListener("click",function(o){o.preventDefault(),openPopup.classList.remove("modal-show"),openPopup.classList.remove("modal-error")}),fillingForm.addEventListener("submit",function(o){loginLogin.value&&mailBox.value?isStorageSupport&&localStorage.setItem("login",loginLogin.value):(o.preventDefault(),openPopup.classList.remove("modal-error"),openPopup.offsetWidth,openPopup.classList.add("modal-error"))}),window.addEventListener("keydown",function(o){27===o.keyCode&&openPopup.classList.contains("modal-show")&&(o.preventDefault(),openPopup.classList.remove("modal-show"),openPopup.classList.remove("modal-error"))});
